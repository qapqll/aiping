"use strict";(self["webpackChunkdemo001"]=self["webpackChunkdemo001"]||[]).push([[340],{96959:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page"},[e._m(0),t("div",{staticClass:"condition-box"},[t("a-select",{attrs:{getPopupContainer:e=>e.parentNode,placeholder:"请设定一项业务"},on:{change:e.busiChange},model:{value:e.busiId,callback:function(t){e.busiId=t},expression:"busiId"}},e._l(e.businessList,(function(s){return t("a-select-option",{key:s.busiId,attrs:{value:s.busiId,title:s.busi}},[e._v(" "+e._s(s.busi)+" ")])})),1),t("div",{staticClass:"user-info"},[t("a-button",{on:{click:e.showPage2}},[e._v("请选择用户")]),e.curUser.name?[e._v(" 姓名："+e._s(e.curUser.name)+"    ")]:e._e(),e.curUser.age?[e._v(" |   年龄："+e._s(e.curUser.age)+"    ")]:e._e(),e.curUser.occupation?[e._v(" |   职业："+e._s(e.curUser.occupation)+"    ")]:e._e(),e.curUser.assetBalDay?[e._v(" |   T日金融资产金额："+e._s(e.curUser.assetBalDay)+"    ")]:e._e(),e.curUser.tsBal2?[e._v(" |   30天提升金额："+e._s(e.curUser.tsBal2)+"    ")]:e._e(),e.curUser.finCntM1?[e._v(" |   近一个月购买理财产品次数："+e._s(e.curUser.finCntM1)+"    ")]:e._e(),e.curUser.prfFinRisk?[e._v(" |   理财产品风险偏好："+e._s(e.curUser.prfFinRisk)+"    ")]:e._e(),t("a-modal",{attrs:{visible:e.visible,width:"1200px",height:"400px",footer:null,destroyOnClose:!0},on:{cancel:e.handleCancel}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("detail-query",{on:{search:e.userSearch}})],1),t("serviceDetail",{ref:"serviceDetail",on:{select:e.handleSelect}})],1)],2)],1),t("div",{staticClass:"page-content"},[t("Talk",{ref:"talk",attrs:{role:"service",busiId:e.busiId,custNo:e.curUser.custNo,uuid:e.uuid},on:{dicNode:e.dicNode,chart:e.getScriptAcceptRatio}}),t("div",{staticClass:"page-right"},[t("process",{attrs:{list:e.flowNodeList,dicNodeActiveList:e.dicNodeActiveList}}),t("chart",{attrs:{pieData:e.pieData,summaryStr:"采纳率"}})],1)],1)])},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-top"},[t("div",[e._v("场景说明：假定您是一名客服人员，1.  请设定业务场景；    2.  为机器人赋予客户信息；    3.  选定后开始电话营销，期间您可以对系统辅助生成话术进行踩赞；     4.  点击结束通话，由机器决定是否成单")])])}],n=(s(44114),s(17670)),o=s(37093),l=s(73339),r=s(93801),u=function(){var e=this,t=e._self._c;return t("a-table",{staticClass:"custom-table",attrs:{rowKey:"custNo",columns:e.columns,"data-source":e.listData,scroll:{y:300},pagination:{showQuickJumper:!1,showSizeChanger:!0,showTotal:()=>`总 ${e.total} 条 第 ${e.pageNum} / ${Math.ceil(e.total/e.pageSize)} 页`,current:e.pageNum,pageSize:e.pageSize,total:e.total}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,s,i){return[e._v(" "+e._s((e.pageNum-1)*e.pageSize+i+1)+" ")]}},{key:"ellipsis-with-tooltip",fn:function(s){return[s&&s.length>=2?t("ATooltip",{staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:s}},[e._v(e._s(s))]):[e._v(e._s(s))]]}},e._l(e.slotList,(function(s){return{key:s.name,fn:function(i,a){return[!0===a.edit?t("a-input",{key:s.key,model:{value:a[s.key],callback:function(t){e.$set(a,s.key,t)},expression:"record[col.key]"}}):i&&i.length>=2?t("ATooltip",{key:s.key,staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:i}},[e._v(e._s(i))]):t("div",{key:s.key},[e._v(e._s(i))])]}}})),{key:"operation",fn:function(s,i){return t("span",{},[i.edit?e._e():t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.edit(i)}}},[e._v("编辑")]),i.edit?t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.save(i)}}},[e._v("保存")]):e._e(),t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.handleSelect(i)}}},[e._v("选中")])],1)}}],null,!0)})},c=[],d=s(99686);const p=[{title:"序号",scopedSlots:{customRender:"index"},width:"60px"},{title:"姓名",dataIndex:"name",key:"name",ellipsis:!0,scopedSlots:{customRender:"name-input"}},{title:"职业",dataIndex:"occupation",key:"occupation",ellipsis:!0,scopedSlots:{customRender:"occupation-input"}},{title:"年龄",dataIndex:"age",key:"ages",ellipsis:!0,scopedSlots:{customRender:"age-input"}},{title:"T日金融资产金额",key:"assetBalDay",dataIndex:"assetBalDay",ellipsis:!0,scopedSlots:{customRender:"assetBalDay-input"}},{title:"30天提升金额",key:"tsBal2",dataIndex:"tsBal2",ellipsis:!0,scopedSlots:{customRender:"tsBal2-input"}},{title:"近一个月购买理财产品次数",key:"finCntM1",dataIndex:"finCntM1",ellipsis:!0,scopedSlots:{customRender:"finCntM1-input"}},{title:"理财产品风险偏好",key:"prfFinRisk",dataIndex:"prfFinRisk",ellipsis:!0,scopedSlots:{customRender:"prfFinRisk-input"}},{title:"操作",key:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"130px"}],h=[{name:"name-input",key:"name"},{name:"occupation-input",key:"occupation"},{name:"age-input",key:"age"},{name:"assetBalDay-input",key:"assetBalDay"},{name:"tsBal2-input",key:"tsBal2"},{name:"finCntM1-input",key:"finCntM1"},{name:"prfFinRisk-input",key:"prfFinRisk"}];var m={name:"CustomerTest",data(){return{visible:!1,confirmLoading:!1,listData:[],columns:p,selectedRowKeys:[],pageNum:1,pageSize:10,total:0,busiId:void 0,bussinessList:[],slotList:h,dialogList:[{role:"user",content:"12345"},{role:"assistant",content:"dfdfdf",good:!1,bad:!1}],query:{userName:""}}},mounted(){this.onSearch()},methods:{onSearch(e){this.pageNum=1,this.query=Object.assign({},this.query,e),this.getList()},getList(){(0,d.Ho)({userName:this.query.userName,pageNo:this.pageNum,pageSize:this.pageSize}).then((e=>{const t=e?.data?.records||[];t.forEach((e=>{e.edit=!1})),this.listData=t,this.total=e?.data?.total||0}),(e=>{(0,n.b4)(e,"获取数据失败")}))},handleTableChange(e){this.pageNum=e.current,this.pageSize=e.pageSize,this.getList()},edit(e){e.edit=!0},save(e){(0,d.ZT)({...e}).then((()=>{e.edit=!1,(0,n.kP)("保存成功")}),(e=>{(0,n.b4)(e,"保存失败")}))},handleSelect(e){this.$emit("select",e)},showPage2(){this.visible=!0}}},v=m,f=s(81656),y=(0,f.A)(v,u,c,!1,null,"2c7af1ac",null),g=y.exports,k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query"},[e._m(0),t("div",{staticClass:"query-right"},[t("a-input",{attrs:{placeholder:"请输入姓名","allow-clear":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}}),t("a-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("搜索")])],1)])},_=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-left"},[t("label",[e._v("用户列表")])])}],b={name:"ServiceDetailQuery",data(){return{query:{userName:""}}},methods:{onSearch(){const e={userName:this.query.userName};this.$emit("search",e)}}},S=b,N=(0,f.A)(S,k,_,!1,null,"65195f31",null),C=N.exports,D=s(31552),R=s(15869),x={name:"CustomerTest",components:{Talk:o.A,Process:l.A,Chart:r.A,serviceDetail:g,DetailQuery:C},data(){return{visible:!1,busiId:void 0,businessList:[],flowNodeList:[],dicNodeActiveList:[],curUser:{},uuid:(0,R.l)(),pieData:[{name:"被采纳",value:0},{name:"修改后采纳",value:0},{name:"未采纳",value:0}]}},mounted(){this.getBusi()},methods:{getBusi(){(0,D.O5)().then((e=>{this.businessList=e.data}),(e=>{(0,n.b4)(e,"获取业务列表失败")}))},busiChange(e){(0,d.o2)({busId:e}).then((e=>{this.flowNodeList=e.data||[]}),(e=>{(0,n.b4)(e,"获取业务节点失败")})),this.refreshDialog()},showPage2(){this.visible=!0},handleSelect(e){this.curUser=e,this.visible=!1,this.refreshDialog()},userSearch(e){this.$refs.serviceDetail.onSearch(e)},handleCancel(){this.visible=!1},refreshDialog(){this.busiId&&this.curUser.custNo&&(this.uuid=(0,R.l)(),this.dicNodeActiveList=[])},dicNode(e,t){-1===this.dicNodeActiveList.findIndex((t=>t.dicScriptNode===e))&&this.dicNodeActiveList.push({dicScriptNode:e,reseaon:t})},getScriptAcceptRatio(){(0,d.fQ)({dialogId:this.uuid}).then((e=>{this.pieData[0].value=e.data?.acceptRate?100*e.data?.acceptRate:0,this.pieData[1].value=e.data?.revisedThenAdoptedRate?100*e.data?.revisedThenAdoptedRate:0,this.pieData[2].value=e.data?.againstRate?100*e.data?.againstRate:0})).then((()=>{}),(e=>{(0,n.b4)(e,"获取饼图数据失败")}))}}},L=x,I=(0,f.A)(L,i,a,!1,null,"7ea6e2fe",null),w=I.exports}}]);