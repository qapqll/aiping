"use strict";(self["webpackChunkdemo001"]=self["webpackChunkdemo001"]||[]).push([[309],{81309:function(e,t,i){i.r(t),i.d(t,{default:function(){return H}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flow-base-page"},[t("polymerize-flow",{ref:"polymerizeFlow",on:{selectedRowKeysChange:e.selectedRowKeysChange}}),t("generate-flow",{attrs:{selectedRowKeys:e.selectedRowKeys,selectedRows:e.selectedRows},on:{goodComplete:e.goodComplete,badComplete:e.badComplete}})],1)},l=[],o=function(){var e=this,t=e._self._c;return t("div",[t("polymerize-query",{attrs:{selectedRowKeys:e.selectedRowKeys},on:{search:e.onSearch,batchDelete:e.batchDelete,uploadCall:e.uploadCall}}),t("a-table",{staticClass:"custom-table",attrs:{rowKey:"libUnionScriptId",columns:e.columns,"data-source":e.listData,"row-selection":e.rowSelection,scroll:{y:300},pagination:{showQuickJumper:!1,showSizeChanger:!0,showTotal:()=>`总 ${e.total} 条 第 ${e.pageNum} / ${Math.ceil(e.total/e.pageSize)} 页`,current:e.pageNum,pageSize:e.pageSize,total:e.total}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,i,s){return[e._v(" "+e._s((e.pageNum-1)*e.pageSize+s+1)+" ")]}},{key:"ellipsis-with-tooltip",fn:function(i){return[i&&i.length>=2?t("ATooltip",{staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:i}},[e._v(e._s(i))]):[e._v(e._s(i))]]}},{key:"operation",fn:function(i,s){return t("span",{},[t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.handleView(s)}}},[e._v("查看")]),t("a-button",{staticClass:"delete-btn",attrs:{type:"link"},on:{click:function(t){return e.handleDelete(s)}}},[e._v("删除")])],1)}}])}),t("a-modal",{attrs:{title:e.detailTitle,closable:!0,destroyOnClose:!0,width:"1500px",footer:null},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("polymerize-detail",{attrs:{inputData:e.selectedDetail},on:{save:e.saveFlowDetail,delete:e.deleteFlowDetail}})],1)],1)},n=[],a=(i(44114),i(31552)),r=i(17670),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query"},[t("div",{staticClass:"query-left"},[t("label",[e._v("聚合话术")]),t("div",{staticClass:"query-select"},[t("a-select",{attrs:{getPopupContainer:e=>e.parentNode,placeholder:"请单选业务","allow-clear":""},on:{change:e.businessChange},model:{value:e.query.busiId,callback:function(t){e.$set(e.query,"busiId",t)},expression:"query.busiId"}},e._l(e.businessList,(function(i){return t("a-select-option",{key:i.busiId,attrs:{value:i.busiId,title:i.busi}},[e._v(" "+e._s(i.busi)+" ")])})),1),t("a-select",{staticClass:"multiple-select",attrs:{getPopupContainer:e=>e.parentNode,placeholder:"全选话术节点",mode:"multiple",maxTagCount:1,"allow-clear":""},model:{value:e.query.scriptNodeId,callback:function(t){e.$set(e.query,"scriptNodeId",t)},expression:"query.scriptNodeId"}},e._l(e.flowNodeList,(function(i){return t("a-select-option",{key:i.scriptNodeId,attrs:{value:i.scriptNodeId,title:i.scriptNode}},[e._v(" "+e._s(i.scriptNode)+" ")])})),1),t("a-select",{staticClass:"multiple-select",attrs:{getPopupContainer:e=>e.parentNode,placeholder:"全选意图",mode:"multiple",maxTagCount:1,"allow-clear":""},model:{value:e.query.intentionId,callback:function(t){e.$set(e.query,"intentionId",t)},expression:"query.intentionId"}},e._l(e.intentionList,(function(i){return t("a-select-option",{key:i.intentionId,attrs:{value:i.intentionId,title:i.intention}},[e._v(" "+e._s(i.intention)+" ")])})),1),t("a-button",{attrs:{type:"primary"},on:{click:e.onSearch},model:{value:e.query.intentionId,callback:function(t){e.$set(e.query,"intentionId",t)},expression:"query.intentionId"}},[e._v("查询")])],1)]),t("div",{staticClass:"query-right"},[t("AUpload",{attrs:{beforeUpload:e.beforeUpload,customRequest:e.uploadCall,accept:e.acceptType,showUploadList:!1}},[t("a-button",{attrs:{type:"primary"}},[e._v("通话导入")])],1),t("a-button",{attrs:{type:"primary",disabled:0===e.selectedRowKeys.length},on:{click:e.batchDelete}},[e._v("批量删除")])],1)])},d=[],c={name:"PolymerizeQuery",props:{selectedRowKeys:{type:Array,default:()=>[]}},data(){return{businessList:[],flowNodeList:[],intentionList:[],query:{busiId:void 0,intentionId:[],scriptNodeId:[]},acceptType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"}},mounted(){this.getBusi()},methods:{getBusi(){(0,a.O5)().then((e=>{this.businessList=e.data}),(e=>{(0,r.b4)(e,"获取业务列表失败")}))},businessChange(){this.query.scriptNodeId=[],this.scriptNodeSearch(),this.query.intentionId=[],this.intentionSearch()},scriptNodeSearch(){(0,a.Cm)({busiId:this.query.busiId}).then((e=>{this.flowNodeList=e.data||[]}),(e=>{(0,r.b4)(e,"获取话术节点失败")}))},intentionSearch(){(0,a.Vg)({busiId:this.query.busiId}).then((e=>{this.intentionList=e.data||[]}),(e=>{(0,r.b4)(e,"获取意图列表失败")}))},onSearch(){const e={busiId:this.query.busiId,intentionId:this.query.intentionId.join(","),scriptNodeId:this.query.scriptNodeId.join(",")};this.$emit("search",e)},beforeUpload(e){return-1!==this.acceptType.indexOf(e.type)||((0,r.b4)(null,"导入文件类型错误,请导入excel文件"),!1)},uploadCall({file:e}){this.$emit("uploadCall",e)},batchDelete(){this.$emit("batchDelete")}}},p=c,h=i(81656),y=(0,h.A)(p,u,d,!1,null,"7675ab5e",null),m=y.exports,b=function(){var e=this,t=e._self._c;return t("a-table",{staticClass:"custom-table",attrs:{rowKey:"id",columns:e.columns,customRow:e.customRow,"data-source":e.listData,scroll:{y:300},pagination:{showQuickJumper:!1,showSizeChanger:!0,showTotal:()=>`总 ${e.total} 条 第 ${e.pageNum} / ${Math.ceil(e.total/e.pageSize)} 页`,current:e.pageNum,pageSize:e.pageSize,total:e.total}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,i,s){return[e._v(" "+e._s((e.pageNum-1)*e.pageSize+s+1)+" ")]}},{key:"ellipsis-with-tooltip",fn:function(i){return[i&&i.length>=2?t("ATooltip",{staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:i}},[e._v(e._s(i))]):[e._v(e._s(i))]]}},{key:"type",fn:function(i,s){return t("span",{},[1==s.genType?t("span",[e._v("导入")]):2==s.genType?t("span",[e._v("生成")]):null==s.genType?t("span",[e._v("- -")]):e._e()])}},e._l(e.slotList,(function(i){return{key:i.name,fn:function(s,l){return[!0===l.edit?t("a-input",{key:i.key,model:{value:l[i.key],callback:function(t){e.$set(l,i.key,t)},expression:"record[col.key]"}}):s&&s.length>=2?t("ATooltip",{key:i.key,staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:s}},[e._v(e._s(s))]):t("div",{key:i.key},[e._v(e._s(s))])]}}})),{key:"operation",fn:function(i,s){return t("span",{},[s.edit?e._e():t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.edit(s)}}},[e._v("编辑")]),s.edit?t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.save(s)}}},[e._v("保存")]):e._e(),t("a-button",{staticClass:"delete-btn",attrs:{type:"link"},on:{click:function(t){e.handleDelete(s)}}},[e._v("删除")])],1)}}],null,!0)})},g=[];const w=[{name:"atti-input",key:"atti"},{name:"question-input",key:"question"},{name:"invalidQuestion-input",key:"invalidQuestion"},{name:"answer-input",key:"answer"},{name:"invalidAnswer-input",key:"invalidAnswer"}];var v={name:"GenerateDetail",props:{inputData:{inputData:Array,required:!0}},data(){const e=[{title:"序号",scopedSlots:{customRender:"index"},width:"60px"},{title:"态度",dataIndex:"atti",key:"atti",ellipsis:!0,scopedSlots:{customRender:"atti-input"},width:"80px"},{title:"画像信息",dataIndex:"perLabel",key:"perLabel",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"},width:"190px"},{title:"有效扩展问话术",key:"question",dataIndex:"question",ellipsis:!0,scopedSlots:{customRender:"question-input"},width:"320px",customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.question)}})},{title:"反例扩展问话术",key:"invalidQuestion",dataIndex:"invalidQuestion",ellipsis:!0,scopedSlots:{customRender:"invalidQuestion-input"},customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.invalidQuestion)}})},{title:"有效回复列表",key:"answer",dataIndex:"answer",ellipsis:!0,scopedSlots:{customRender:"answer-input"},width:"320px",customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.answer)}})},{title:"反例回复列表",key:"invalidAnswer",dataIndex:"invalidAnswer",ellipsis:!0,scopedSlots:{customRender:"invalidAnswer-input"},customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.invalidAnswer)}})},{title:"生成类型",key:"genType",dataIndex:"genType",ellipsis:!0,scopedSlots:{customRender:"type"},width:"90px"},{title:"操作",key:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"110px"}];return{listData:[],columns:e,slotList:w,selectedRowKeys:[],pageNum:1,pageSize:10,total:0,transmitMessage:{}}},mounted(){this.onSearch()},methods:{customRow(){return{style:{"font-size":"12px"}}},copyToClipboard(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy"),(0,r.kP)("复制成功")}catch(i){(0,r.b4)(null,"复制失败")}document.body.removeChild(t)},onSearch(){this.pageNum=1,this.getList()},getList(){(0,a.aX)({libUnionScriptId:this.inputData.libUnionScriptId,pageNow:this.pageNum,pageSize:this.pageSize}).then((e=>{const t=e?.data?.unionScriptFaqBusiNodeIntentionVo||[];t.forEach((e=>{e.edit=!1})),this.listData=t,this.total=e?.data?.pageTotal||0}),(e=>{(0,r.b4)(e,"获取数据失败")}))},handleTableChange(e){this.pageNum=e.current,this.pageSize=e.pageSize,this.getList()},edit(e){e.edit=!0},save(e){(0,a.eK)({id:e.id,question:e.question,invalidQuestion:e.invalidQuestion,answer:e.answer,invalidAnswer:e.invalidAnswer,atti:e.atti}).then((()=>{e.edit=!1,this.$emit("save"),(0,r.kP)("保存成功")}),(e=>{(0,r.b4)(e,"保存失败")}))},handleDelete(e){this.deleteManyScriptApi(e.id)},deleteManyScriptApi(e){this.$confirm({title:"删除后不可恢复，确认删除？",onOk:()=>{(0,a.KL)({ids:e}).then((()=>{(0,r.kP)("删除成功"),this.$emit("delete"),this.onSearch()}),(e=>{(0,r.b4)(e,"删除失败")}))}})}}},f=v,k=(0,h.A)(f,b,g,!1,null,"ee971b3e",null),x=k.exports;const S=[{title:"序号",scopedSlots:{customRender:"index"},width:"60px"},{title:"业务",dataIndex:"busi",key:"busi",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"话术节点",dataIndex:"scriptNode",key:"scriptNode",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"意图",key:"intention",dataIndex:"intention",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"扩展问列表",key:"firstQuestionNum",dataIndex:"firstQuestionNum",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"有效回复列表",key:"firstAnswerNum",dataIndex:"firstAnswerNum",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"反例回复列表",key:"firstInvalidAnswerNum",dataIndex:"firstInvalidAnswerNum",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"操作",key:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"130px"}];var C={name:"PolymerizeFlow",components:{PolymerizeQuery:m,PolymerizeDetail:x},data(){return{businessList:[],query:{busiId:void 0,intentionId:"",scriptNodeId:""},listData:[],columns:S,selectedRowKeys:[],selectedRows:[],pageNum:1,pageSize:10,total:0,visible:!1,selectedDetail:{},detailTitle:""}},mounted(){this.onSearch()},computed:{rowSelection(){return{onChange:e=>{this.selectedRowKeys=e,this.selectedRows=this.selectedRows.filter((e=>this.selectedRowKeys.includes(e.libUnionScriptId))),this.selectedRowKeys.forEach((e=>{-1===this.selectedRows.findIndex((t=>t.libUnionScriptId===e))&&this.selectedRows.push(this.listData.find((t=>t.libUnionScriptId===e)))})),this.$emit("selectedRowKeysChange",this.selectedRowKeys,this.selectedRows)},selectedRowKeys:this.selectedRowKeys}}},methods:{onSearch(e){this.pageNum=1,this.query=Object.assign({},this.query,e),this.selectedRowKeys=[],this.selectedRows=[],this.$emit("selectedRowKeysChange",this.selectedRowKeys,this.selectedRows),this.getList()},getList(){(0,a.pV)({busiId:this.query.busiId,intentionId:this.query.intentionId?this.query.intentionId:void 0,scriptNodeId:this.query.scriptNodeId?this.query.scriptNodeId:void 0,pageNow:this.pageNum,pageSize:this.pageSize}).then((e=>{this.listData=e?.data?.unionScriptFaqBusiNodeIntentionVo||[],this.total=e?.data?.pageTotal||0}),(e=>{(0,r.b4)(e,"获取数据失败")}))},handleTableChange(e){this.pageNum=e.current,this.pageSize=e.pageSize,this.getList()},handleView(e){this.selectedDetail=e,this.detailTitle=`聚合话术详情（${e.busi}-${e.scriptNode}-${e.intention}）`,this.visible=!0},handleDelete(e){this.deleteManyScriptApi(e.libUnionScriptId)},batchDelete(){0!==this.selectedRowKeys.length?this.deleteManyScriptApi(this.selectedRowKeys.join(",")):(0,r.b4)(null,"请至少选择一条数据")},deleteManyScriptApi(e){this.$confirm({title:"删除后不可恢复，确认删除？",onOk:()=>{(0,a.aH)({ids:e}).then((()=>{(0,r.kP)("删除成功"),this.onSearch()}),(e=>{(0,r.b4)(e,"删除失败")}))}})},uploadCall(e){console.log(e);const t=new FormData;t.append("file",e),(0,a.uK)(t).then((()=>{(0,r.kP)("导入成功"),this.onSearch()}),(e=>{(0,r.b4)(e,"导入失败")}))},saveFlowDetail(){this.getList()},deleteFlowDetail(){this.getList()}}},q=C,_=(0,h.A)(q,o,n,!1,null,"0a99c60d",null),I=_.exports,R=function(){var e=this,t=e._self._c;return t("div",[t("generate-query",{attrs:{selectedRowKeys:e.selectedRowKeys},on:{generateQuestion:e.generateQuestion,generateAnswer:e.generateAnswer}}),t("a-table",{staticClass:"custom-table",attrs:{rowKey:"uuid",columns:e.columns,"data-source":e.listData,scroll:{y:300},pagination:{showQuickJumper:!1,showSizeChanger:!0,showTotal:()=>`总 ${e.total} 条 第 ${e.pageNum} / ${Math.ceil(e.total/e.pageSize)} 页`,current:e.pageNum,pageSize:e.pageSize,total:e.total}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"index",fn:function(t,i,s){return[e._v(" "+e._s((e.pageNum-1)*e.pageSize+s+1)+" ")]}},{key:"ellipsis-with-tooltip",fn:function(i){return[i&&i.length>=2?t("ATooltip",{staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:i}},[e._v(e._s(i))]):[e._v(e._s(i))]]}},e._l(e.slotList,(function(i){return{key:i.name,fn:function(s,l){return[!0===l.edit?t("a-input",{key:i.key,model:{value:l[i.key],callback:function(t){e.$set(l,i.key,t)},expression:"record[col.key]"}}):s&&s.length>=2?t("ATooltip",{key:i.key,staticClass:"custom-table-tooltip",attrs:{placement:"topLeft",title:s}},[e._v(e._s(s))]):t("div",{key:i.key},[e._v(e._s(s))])]}}})),{key:"operation",fn:function(i,s){return t("span",{},[t("a-button",{staticClass:"good-btn",class:{active:s.good},attrs:{type:"link"},on:{click:function(t){return e.handGood(s)}}}),t("a-button",{staticClass:"bad-btn",class:{active:s.bad},attrs:{type:"link"},on:{click:function(t){return e.handBad(s)}}}),s.edit?e._e():t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.edit(s)}}},[e._v("编辑")]),s.edit?t("a-button",{attrs:{type:"link"},on:{click:function(t){return e.save(s)}}},[e._v("保存")]):e._e()],1)}}],null,!0)})],1)},N=[],A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query"},[e._m(0),t("div",{staticClass:"query-right"},[t("a-select",{attrs:{getPopupContainer:e=>e.parentNode,"allow-clear":""},model:{value:e.query.generationNum,callback:function(t){e.$set(e.query,"generationNum",t)},expression:"query.generationNum"}},e._l(e.generateSize,(function(i){return t("a-select-option",{key:i.value,attrs:{value:i.value,title:i.label}},[e._v(" "+e._s(i.label)+" ")])})),1),t("a-select",{staticClass:"multiple-select",attrs:{getPopupContainer:e=>e.parentNode,placeholder:"全选润色类型",mode:"multiple",maxTagCount:1,"allow-clear":""},model:{value:e.query.touchUp,callback:function(t){e.$set(e.query,"touchUp",t)},expression:"query.touchUp"}},e._l(e.polishList,(function(i){return t("a-select-option",{key:i.value,attrs:{value:i.value,title:i.label}},[e._v(" "+e._s(i.label)+" ")])})),1),t("a-select",{staticClass:"multiple-select",attrs:{getPopupContainer:e=>e.parentNode,placeholder:"全选风格",mode:"multiple",maxTagCount:1,"allow-clear":""},model:{value:e.query.style,callback:function(t){e.$set(e.query,"style",t)},expression:"query.style"}},e._l(e.styleList,(function(i){return t("a-select-option",{key:i.value,attrs:{value:i.value,title:i.label}},[e._v(" "+e._s(i.label)+" ")])})),1),t("a-select",{staticClass:"multiple-select",attrs:{getPopupContainer:e=>e.parentNode,placeholder:"全选情绪",mode:"multiple",maxTagCount:1,"allow-clear":""},model:{value:e.query.atti,callback:function(t){e.$set(e.query,"atti",t)},expression:"query.atti"}},e._l(e.emotionList,(function(i){return t("a-select-option",{key:i.value,attrs:{value:i.value,title:i.label}},[e._v(" "+e._s(i.label)+" ")])})),1),t("a-button",{attrs:{type:"primary",disabled:0===e.selectedRowKeys.length||e.selectedRowKeys.length>1},on:{click:e.generateQuestion}},[e._v("生成扩展问")]),t("a-button",{attrs:{type:"primary",disabled:0===e.selectedRowKeys.length||e.selectedRowKeys.length>1},on:{click:e.generateAnswer}},[e._v("生成扩展答案")])],1)])},T=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-left"},[t("label",[e._v("生成话术")])])}];const $=[{label:"生成2条",value:2},{label:"生成5条",value:5},{label:"生成10条",value:10},{label:"生成20条",value:20}],z=[{label:"改写",value:"改写"},{label:"扩写",value:"扩写"},{label:"缩写",value:"缩写"},{label:"续写",value:"续写"},{label:"仿写",value:"仿写"}],K=[{label:"书面语",value:"书面语"},{label:"口头语",value:"口头语"},{label:"公文用法",value:"公文用法"}],L=[{label:"开心",value:"开心"},{label:"兴趣浓厚",value:"兴趣浓厚"},{label:"兴趣一般",value:"兴趣一般"},{label:"中性",value:"中性"},{label:"急躁",value:"急躁"},{label:"愤怒",value:"愤怒"},{label:"多疑",value:"多疑"},{label:"严谨",value:"严谨"},{label:"骄傲",value:"骄傲"},{label:"悲观",value:"悲观"}];var D={name:"GenerateQuery",props:{selectedRowKeys:{type:Array,default:()=>[]}},data(){return{generateSize:$,polishList:z,styleList:K,emotionList:L,query:{generationNum:$[0].value,atti:[],style:[],touchUp:[]}}},methods:{generateQuestion(){const e={generationNum:this.query.generationNum,atti:this.query.atti.length>0?this.query.atti.join(","):this.getAllEmotionTypes().join(","),style:this.query.style.length>0?this.query.style.join(","):this.getAllStyleTypes().join(","),touchUp:this.query.touchUp.length>0?this.query.touchUp.join(","):this.getAllPolishTypes().join(",")};this.$emit("generateQuestion",e)},generateAnswer(){const e={generationNum:this.query.generationNum,atti:this.query.atti.length>0?this.query.atti.join(","):this.getAllEmotionTypes().join(","),style:this.query.style.length>0?this.query.style.join(","):this.getAllStyleTypes().join(","),touchUp:this.query.touchUp.length>0?this.query.touchUp.join(","):this.getAllPolishTypes().join(",")};this.$emit("generateAnswer",e)},getAllPolishTypes(){return z.map((e=>e.value))},getAllStyleTypes(){return K.map((e=>e.value))},getAllEmotionTypes(){return L.map((e=>e.value))}}},U=D,P=(0,h.A)(U,A,T,!1,null,"90af46fc",null),Q=P.exports,j=i(15869);const F=[{name:"question-input",key:"question"},{name:"response-input",key:"response"}];var B={name:"GenerateFlow",components:{GenerateQuery:Q},props:{selectedRowKeys:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]}},data(){const e=[{title:"序号",scopedSlots:{customRender:"index"},width:"60px"},{title:"业务",dataIndex:"busi",key:"busi",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"话术节点",dataIndex:"scriptNode",key:"scriptNode",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"意图",key:"intention",dataIndex:"intention",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"润色类型",key:"touchUp",dataIndex:"touchUp",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"情绪",key:"atti",dataIndex:"atti",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"风格",key:"style",dataIndex:"style",ellipsis:!0,scopedSlots:{customRender:"ellipsis-with-tooltip"}},{title:"扩展问",key:"question",dataIndex:"question",ellipsis:!0,scopedSlots:{customRender:"question-input"},customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.question)}})},{title:"扩展答案",key:"response",dataIndex:"response",ellipsis:!0,scopedSlots:{customRender:"response-input"},customCell:e=>({on:{dblclick:()=>this.copyToClipboard(e.response)}})},{title:"操作",key:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"200px"}];return{businessList:[],listData:[],columns:e,pageNum:1,pageSize:10,total:0,slotList:F}},methods:{handleTableChange(e){this.pageNum=e.current,this.pageSize=e.pageSize},copyToClipboard(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy"),(0,r.kP)("复制成功")}catch(i){(0,r.b4)(null,"复制失败")}document.body.removeChild(t)},edit(e){this.$set(e,"edit",!0)},save(e){this.$set(e,"edit",!1)},handGood(e){if(e.good)this.cancelGoodBad(e).then((()=>{this.$emit("goodComplete")}),(e=>{(0,r.b4)(e,"取消点赞失败")}));else{const t=e.bad?Promise.all([this.cancelGoodBad(e),this.good(e)]):this.good(e);t.then((()=>{this.$emit("goodComplete")}),(e=>{(0,r.b4)(e,"点赞失败")}))}},good(e){const t=new Promise(((t,i)=>{const s=e.question?{question:e.question}:{answer:e.response};this.thumbsUpDownImport({...s,atti:e.atti}).then((i=>{this.$set(e,"good",!0),this.$set(e,"bad",!1),e.id=i.data,t()}),(e=>{i(e)}))}));return t},cancelGoodBad(e){const t=new Promise(((t,i)=>{this.deleteManyUnionScriptDetail(e.id).then((()=>{this.$set(e,"good",!1),this.$set(e,"bad",!1),t()}),(e=>{i(e)}))}));return t},handBad(e){if(e.bad)this.cancelGoodBad(e).then((()=>{this.$emit("badComplete")}),(e=>{(0,r.b4)(e,"取消点踩失败")}));else{const t=e.good?Promise.all([this.cancelGoodBad(e),this.bad(e)]):this.bad(e);t.then((()=>{this.$emit("badComplete")}),(e=>{(0,r.b4)(e,"点踩失败")}))}},bad(e){const t=new Promise(((t,i)=>{const s=e.question?{invalidQuestion:e.question}:{invalidAnswer:e.response};this.thumbsUpDownImport({...s,atti:e.atti}).then((i=>{this.$set(e,"good",!1),this.$set(e,"bad",!0),e.id=i.data,t()}),(e=>{i(e)}))}));return t},thumbsUpDownImport({atti:e="",question:t,invalidQuestion:i,answer:s,invalidAnswer:l}){return(0,a.ao)({libUnionScriptId:this.selectedRowKeys.join(","),atti:e,question:t,invalidQuestion:i,answer:s,invalidAnswer:l,perLabel:this.selectedRows.map((e=>e.perLabel)).join(","),genType:2})},deleteManyUnionScriptDetail(e){return(0,a.KL)({ids:e})},generateQuestion(e){this.selectedRowKeys.length>1?(0,r.b4)(null,"请只选择一条数据"):(this.pageNum=1,(0,a.yf)({...e,pageNow:this.pageNum,pageSize:this.pageSize,id:this.selectedRowKeys.join(",")}).then((e=>{const t=e.data||[];t.forEach((e=>{e.question=e.response,e.response="",e.edit=!1,e.uuid=(0,j.l)()})),this.listData=t,this.total=this.listData.length,(0,r.kP)("生成扩展问成功")}),(e=>{(0,r.b4)(e,"生成扩展问失败")})))},generateAnswer(e){this.selectedRowKeys.length>1?(0,r.b4)(null,"请只选择一条数据"):(this.pageNum=1,(0,a.I_)({...e,pageNow:this.pageNum,pageSize:this.pageSize,id:this.selectedRowKeys.join(",")}).then((e=>{const t=e.data||[];t.forEach((e=>{e.uuid=(0,j.l)(),e.edit=!1})),this.listData=t,this.total=this.listData.length,(0,r.kP)("生成扩展答案成功")}),(e=>{(0,r.b4)(e,"生成扩展答案失败")})))}}},G=B,M=(0,h.A)(G,R,N,!1,null,"2503a11a",null),E=M.exports,O={name:"FlowBase",components:{PolymerizeFlow:I,GenerateFlow:E},data(){return{selectedRowKeys:[],selectedRows:[]}},methods:{selectedRowKeysChange(e,t){this.selectedRowKeys=e,this.selectedRows=t},goodComplete(){this.$refs.polymerizeFlow.getList()},badComplete(){this.$refs.polymerizeFlow.getList()}}},V=O,J=(0,h.A)(V,s,l,!1,null,"5d19714b",null),H=J.exports},15869:function(e,t,i){i.d(t,{l:function(){return s}});const s=()=>"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)}))}}]);